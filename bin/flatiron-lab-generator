#!/usr/bin/env ruby

require 'flatiron-lab-generator'
require 'optparse'

git = nil

my_banner = <<-EOS
  Usage: flatiron-lab-generator <template-type> <lab-name>

  What is does: Creates a template for the type of lab specified. The template is created in the directory you call the gem in. Note that an empty git repo is initialized at creation, so be careful. #{"\u270B".encode("utf-8")}

  Template format: <template-type> (separated by dashes)
  Lab name format: <lab-name> (separated by dashes)

  Available templates:
  1. procedural-ruby
  2. command-line
  3. SQL
  4. activerecord
  5. rake
  6. erb-static-site
  7. rack
  8. sinatra-classic 
  9. sinatra-mvc
  10. js
EOS

OptionParser.new do |opts|
  opts.banner = my_banner
  opts.on("-g", "--git", "Initialize git when template is generated") do |g|
    git = g
  end
end.parse!

if !ARGV[0] || !ARGV[1]
  puts my_banner
elsif !FlatironLabGenerator::TemplateMaker::TEMPLATES.include?(ARGV[0])
  puts my_banner
else
  FlatironLabGenerator::TemplateMaker.run(ARGV[0], ARGV[1], git)
end
