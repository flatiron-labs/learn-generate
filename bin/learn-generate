#!/usr/bin/env ruby

require 'learn_generate'


options = {}

OptionParser.new do |opts|
  opts.on('--list', 'List known templates') do |l|
    options[:list] = true
  end

  opts.on('--internet', 'Set internet connection to true/false') do |i|
    options[:internet] = i
  end
end.parse!

template_loader = LearnGenerate::TemplateLoader.new(options[:internet])
known_templates = template_loader.templates
templates_list  = template_loader.printable_list

my_banner = <<-EOS
  Usage: learn generate <lab-name> -t <template-name>

  Available templates:
  #{templates_list}
EOS

if !ARGV[0] || !ARGV[1]
  puts my_banner
elsif !LearnGenerate::TemplateMaker::TEMPLATES.include?(ARGV[0])
  puts my_banner
else
  LearnGenerate::TemplateMaker.run(ARGV[0], ARGV[1])
end
